<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Sun Jun 14 21:11:42 EDT 2015 -->
<title>ThreadLocal.ThreadLocalMap</title>
<meta name="date" content="2015-06-14">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ThreadLocal.ThreadLocalMap";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ThreadLocal.ThreadLocalMap.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../java/lang/ThreadLocal.html" title="class in java.lang"><span class="strong">Prev Class</span></a></li>
<li><a href="../../java/lang/ThreadLocal.ThreadLocalMap.Entry.html" title="class in java.lang"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?java/lang/ThreadLocal.ThreadLocalMap.html" target="_top">Frames</a></li>
<li><a href="ThreadLocal.ThreadLocalMap.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">java.lang</div>
<h2 title="Class ThreadLocal.ThreadLocalMap" class="title">Class ThreadLocal.ThreadLocalMap</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="../../java/lang/Object.html" title="class in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>java.lang.ThreadLocal.ThreadLocalMap</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Enclosing class:</dt>
<dd><a href="../../java/lang/ThreadLocal.html" title="class in java.lang">ThreadLocal</a>&lt;<a href="../../java/lang/ThreadLocal.html" title="type parameter in ThreadLocal">T</a>&gt;</dd>
</dl>
<hr>
<br>
<pre>static class <a href="../../src-html/java/lang/ThreadLocal.html#line.261">ThreadLocal.ThreadLocalMap</a>
extends <a href="../../java/lang/Object.html" title="class in java.lang">Object</a></pre>
<div class="block">ThreadLocalMap is a customized hash map suitable only for
 maintaining thread local values. No operations are exported
 outside of the ThreadLocal class. The class is package private to
 allow declaration of fields in class Thread.  To help deal with
 very large and long-lived usages, the hash table entries use
 WeakReferences for keys. However, since reference queues are not
 used, stale entries are guaranteed to be removed only when
 the table starts running out of space.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.Entry.html" title="class in java.lang">ThreadLocal.ThreadLocalMap.Entry</a></strong></code>
<div class="block">The entries in this hash map extend WeakReference, using
 its main ref field as the key (which is always a
 ThreadLocal object).</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#INITIAL_CAPACITY">INITIAL_CAPACITY</a></strong></code>
<div class="block">The initial capacity -- MUST be a power of two.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#size">size</a></strong></code>
<div class="block">The number of entries in the table.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../java/lang/ThreadLocal.ThreadLocalMap.Entry.html" title="class in java.lang">ThreadLocal.ThreadLocalMap.Entry</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#table">table</a></strong></code>
<div class="block">The table, resized as necessary.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#threshold">threshold</a></strong></code>
<div class="block">The next size value at which to resize.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private </code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#ThreadLocal.ThreadLocalMap(java.lang.ThreadLocal.ThreadLocalMap)">ThreadLocal.ThreadLocalMap</a></strong>(<a href="../../java/lang/ThreadLocal.ThreadLocalMap.html" title="class in java.lang">ThreadLocal.ThreadLocalMap</a>&nbsp;parentMap)</code>
<div class="block">Construct a new map including all Inheritable ThreadLocals
 from given parent map.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private)</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#ThreadLocal.ThreadLocalMap(java.lang.ThreadLocal,%20java.lang.Object)">ThreadLocal.ThreadLocalMap</a></strong>(<a href="../../java/lang/ThreadLocal.html" title="class in java.lang">ThreadLocal</a>&nbsp;firstKey,
                                                    <a href="../../java/lang/Object.html" title="class in java.lang">Object</a>&nbsp;firstValue)</code>
<div class="block">Construct a new map initially containing (firstKey, firstValue).</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#cleanSomeSlots(int,%20int)">cleanSomeSlots</a></strong>(int&nbsp;i,
                            int&nbsp;n)</code>
<div class="block">Heuristically scan some cells looking for stale entries.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#expungeStaleEntries()">expungeStaleEntries</a></strong>()</code>
<div class="block">Expunge all stale entries in the table.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#expungeStaleEntry(int)">expungeStaleEntry</a></strong>(int&nbsp;staleSlot)</code>
<div class="block">Expunge a stale entry by rehashing any possibly colliding entries
 lying between staleSlot and the next null slot.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../java/lang/ThreadLocal.ThreadLocalMap.Entry.html" title="class in java.lang">ThreadLocal.ThreadLocalMap.Entry</a></code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#getEntry(java.lang.ThreadLocal)">getEntry</a></strong>(<a href="../../java/lang/ThreadLocal.html" title="class in java.lang">ThreadLocal</a>&nbsp;key)</code>
<div class="block">Get the entry associated with key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../java/lang/ThreadLocal.ThreadLocalMap.Entry.html" title="class in java.lang">ThreadLocal.ThreadLocalMap.Entry</a></code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#getEntryAfterMiss(java.lang.ThreadLocal,%20int,%20java.lang.ThreadLocal.ThreadLocalMap.Entry)">getEntryAfterMiss</a></strong>(<a href="../../java/lang/ThreadLocal.html" title="class in java.lang">ThreadLocal</a>&nbsp;key,
                                  int&nbsp;i,
                                  <a href="../../java/lang/ThreadLocal.ThreadLocalMap.Entry.html" title="class in java.lang">ThreadLocal.ThreadLocalMap.Entry</a>&nbsp;e)</code>
<div class="block">Version of getEntry method for use when key is not found in
 its direct hash slot.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#nextIndex(int,%20int)">nextIndex</a></strong>(int&nbsp;i,
                  int&nbsp;len)</code>
<div class="block">Increment i modulo len.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#prevIndex(int,%20int)">prevIndex</a></strong>(int&nbsp;i,
                  int&nbsp;len)</code>
<div class="block">Decrement i modulo len.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#rehash()">rehash</a></strong>()</code>
<div class="block">Re-pack and/or re-size the table.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#remove(java.lang.ThreadLocal)">remove</a></strong>(<a href="../../java/lang/ThreadLocal.html" title="class in java.lang">ThreadLocal</a>&nbsp;key)</code>
<div class="block">Remove the entry for key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#replaceStaleEntry(java.lang.ThreadLocal,%20java.lang.Object,%20int)">replaceStaleEntry</a></strong>(<a href="../../java/lang/ThreadLocal.html" title="class in java.lang">ThreadLocal</a>&nbsp;key,
                                  <a href="../../java/lang/Object.html" title="class in java.lang">Object</a>&nbsp;value,
                                  int&nbsp;staleSlot)</code>
<div class="block">Replace a stale entry encountered during a set operation
 with an entry for the specified key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#resize()">resize</a></strong>()</code>
<div class="block">Double the capacity of the table.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#set(java.lang.ThreadLocal,%20java.lang.Object)">set</a></strong>(<a href="../../java/lang/ThreadLocal.html" title="class in java.lang">ThreadLocal</a>&nbsp;key,
      <a href="../../java/lang/Object.html" title="class in java.lang">Object</a>&nbsp;value)</code>
<div class="block">Set the value associated with key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../java/lang/ThreadLocal.ThreadLocalMap.html#setThreshold(int)">setThreshold</a></strong>(int&nbsp;len)</code>
<div class="block">Set the resize threshold to maintain at worst a 2/3 load factor.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="../../java/lang/Object.html" title="class in java.lang">Object</a></h3>
<code><a href="../../java/lang/Object.html#clone()">clone</a>, <a href="../../java/lang/Object.html#equals(java.lang.Object)">equals</a>, <a href="../../java/lang/Object.html#finalize()">finalize</a>, <a href="../../java/lang/Object.html#getClass()">getClass</a>, <a href="../../java/lang/Object.html#hashCode()">hashCode</a>, <a href="../../java/lang/Object.html#notify()">notify</a>, <a href="../../java/lang/Object.html#notifyAll()">notifyAll</a>, <a href="../../java/lang/Object.html#toString()">toString</a>, <a href="../../java/lang/Object.html#wait()">wait</a>, <a href="../../java/lang/Object.html#wait(long)">wait</a>, <a href="../../java/lang/Object.html#wait(long,%20int)">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="INITIAL_CAPACITY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INITIAL_CAPACITY</h4>
<pre>private static final&nbsp;int <a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.284">INITIAL_CAPACITY</a></pre>
<div class="block">The initial capacity -- MUST be a power of two.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#java.lang.ThreadLocal.ThreadLocalMap.INITIAL_CAPACITY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="table">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>table</h4>
<pre>private&nbsp;<a href="../../java/lang/ThreadLocal.ThreadLocalMap.Entry.html" title="class in java.lang">ThreadLocal.ThreadLocalMap.Entry</a>[] <a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.290">table</a></pre>
<div class="block">The table, resized as necessary.
 table.length MUST always be a power of two.</div>
</li>
</ul>
<a name="size">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre>private&nbsp;int <a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.295">size</a></pre>
<div class="block">The number of entries in the table.</div>
</li>
</ul>
<a name="threshold">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>threshold</h4>
<pre>private&nbsp;int <a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.300">threshold</a></pre>
<div class="block">The next size value at which to resize.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ThreadLocal.ThreadLocalMap(java.lang.ThreadLocal, java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ThreadLocal.ThreadLocalMap</h4>
<pre><a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.328">ThreadLocal.ThreadLocalMap</a>(<a href="../../java/lang/ThreadLocal.html" title="class in java.lang">ThreadLocal</a>&nbsp;firstKey,
                          <a href="../../java/lang/Object.html" title="class in java.lang">Object</a>&nbsp;firstValue)</pre>
<div class="block">Construct a new map initially containing (firstKey, firstValue).
 ThreadLocalMaps are constructed lazily, so we only create
 one when we have at least one entry to put in it.</div>
</li>
</ul>
<a name="ThreadLocal.ThreadLocalMap(java.lang.ThreadLocal.ThreadLocalMap)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ThreadLocal.ThreadLocalMap</h4>
<pre>private&nbsp;<a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.342">ThreadLocal.ThreadLocalMap</a>(<a href="../../java/lang/ThreadLocal.ThreadLocalMap.html" title="class in java.lang">ThreadLocal.ThreadLocalMap</a>&nbsp;parentMap)</pre>
<div class="block">Construct a new map including all Inheritable ThreadLocals
 from given parent map. Called only by createInheritedMap.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>parentMap</code> - the map associated with parent thread.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setThreshold(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setThreshold</h4>
<pre>private&nbsp;void&nbsp;<a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.305">setThreshold</a>(int&nbsp;len)</pre>
<div class="block">Set the resize threshold to maintain at worst a 2/3 load factor.</div>
</li>
</ul>
<a name="nextIndex(int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextIndex</h4>
<pre>private static&nbsp;int&nbsp;<a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.312">nextIndex</a>(int&nbsp;i,
            int&nbsp;len)</pre>
<div class="block">Increment i modulo len.</div>
</li>
</ul>
<a name="prevIndex(int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prevIndex</h4>
<pre>private static&nbsp;int&nbsp;<a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.319">prevIndex</a>(int&nbsp;i,
            int&nbsp;len)</pre>
<div class="block">Decrement i modulo len.</div>
</li>
</ul>
<a name="getEntry(java.lang.ThreadLocal)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntry</h4>
<pre>private&nbsp;<a href="../../java/lang/ThreadLocal.ThreadLocalMap.Entry.html" title="class in java.lang">ThreadLocal.ThreadLocalMap.Entry</a>&nbsp;<a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.375">getEntry</a>(<a href="../../java/lang/ThreadLocal.html" title="class in java.lang">ThreadLocal</a>&nbsp;key)</pre>
<div class="block">Get the entry associated with key.  This method
 itself handles only the fast path: a direct hit of existing
 key. It otherwise relays to getEntryAfterMiss.  This is
 designed to maximize performance for direct hits, in part
 by making this method readily inlinable.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - the thread local object</dd>
<dt><span class="strong">Returns:</span></dt><dd>the entry associated with key, or null if no such</dd></dl>
</li>
</ul>
<a name="getEntryAfterMiss(java.lang.ThreadLocal, int, java.lang.ThreadLocal.ThreadLocalMap.Entry)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntryAfterMiss</h4>
<pre>private&nbsp;<a href="../../java/lang/ThreadLocal.ThreadLocalMap.Entry.html" title="class in java.lang">ThreadLocal.ThreadLocalMap.Entry</a>&nbsp;<a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.393">getEntryAfterMiss</a>(<a href="../../java/lang/ThreadLocal.html" title="class in java.lang">ThreadLocal</a>&nbsp;key,
                                                 int&nbsp;i,
                                                 <a href="../../java/lang/ThreadLocal.ThreadLocalMap.Entry.html" title="class in java.lang">ThreadLocal.ThreadLocalMap.Entry</a>&nbsp;e)</pre>
<div class="block">Version of getEntry method for use when key is not found in
 its direct hash slot.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - the thread local object</dd><dd><code>i</code> - the table index for key's hash code</dd><dd><code>e</code> - the entry at table[i]</dd>
<dt><span class="strong">Returns:</span></dt><dd>the entry associated with key, or null if no such</dd></dl>
</li>
</ul>
<a name="set(java.lang.ThreadLocal, java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>set</h4>
<pre>private&nbsp;void&nbsp;<a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.416">set</a>(<a href="../../java/lang/ThreadLocal.html" title="class in java.lang">ThreadLocal</a>&nbsp;key,
       <a href="../../java/lang/Object.html" title="class in java.lang">Object</a>&nbsp;value)</pre>
<div class="block">Set the value associated with key.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - the thread local object</dd><dd><code>value</code> - the value to be set</dd></dl>
</li>
</ul>
<a name="remove(java.lang.ThreadLocal)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>private&nbsp;void&nbsp;<a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.452">remove</a>(<a href="../../java/lang/ThreadLocal.html" title="class in java.lang">ThreadLocal</a>&nbsp;key)</pre>
<div class="block">Remove the entry for key.</div>
</li>
</ul>
<a name="replaceStaleEntry(java.lang.ThreadLocal, java.lang.Object, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replaceStaleEntry</h4>
<pre>private&nbsp;void&nbsp;<a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.482">replaceStaleEntry</a>(<a href="../../java/lang/ThreadLocal.html" title="class in java.lang">ThreadLocal</a>&nbsp;key,
                     <a href="../../java/lang/Object.html" title="class in java.lang">Object</a>&nbsp;value,
                     int&nbsp;staleSlot)</pre>
<div class="block">Replace a stale entry encountered during a set operation
 with an entry for the specified key.  The value passed in
 the value parameter is stored in the entry, whether or not
 an entry already exists for the specified key.

 As a side effect, this method expunges all stale entries in the
 "run" containing the stale entry.  (A run is a sequence of entries
 between two null slots.)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - the key</dd><dd><code>value</code> - the value to be associated with key</dd><dd><code>staleSlot</code> - index of the first stale entry encountered while
         searching for key.</dd></dl>
</li>
</ul>
<a name="expungeStaleEntry(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>expungeStaleEntry</h4>
<pre>private&nbsp;int&nbsp;<a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.551">expungeStaleEntry</a>(int&nbsp;staleSlot)</pre>
<div class="block">Expunge a stale entry by rehashing any possibly colliding entries
 lying between staleSlot and the next null slot.  This also expunges
 any other stale entries encountered before the trailing null.  See
 Knuth, Section 6.4</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>staleSlot</code> - index of slot known to have null key</dd>
<dt><span class="strong">Returns:</span></dt><dd>the index of the next null slot after staleSlot
 (all between staleSlot and this slot will have been checked
 for expunging).</dd></dl>
</li>
</ul>
<a name="cleanSomeSlots(int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanSomeSlots</h4>
<pre>private&nbsp;boolean&nbsp;<a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.611">cleanSomeSlots</a>(int&nbsp;i,
                     int&nbsp;n)</pre>
<div class="block">Heuristically scan some cells looking for stale entries.
 This is invoked when either a new element is added, or
 another stale one has been expunged. It performs a
 logarithmic number of scans, as a balance between no
 scanning (fast but retains garbage) and a number of scans
 proportional to number of elements, that would find all
 garbage but would cause some insertions to take O(n) time.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>i</code> - a position known NOT to hold a stale entry. The
 scan starts at the element after i.</dd><dd><code>n</code> - scan control: <tt>log2(n)</tt> cells are scanned,
 unless a stale entry is found, in which case
 <tt>log2(table.length)-1</tt> additional cells are scanned.
 When called from insertions, this parameter is the number
 of elements, but when from replaceStaleEntry, it is the
 table length. (Note: all this could be changed to be either
 more or less aggressive by weighting n instead of just
 using straight log n. But this version is simple, fast, and
 seems to work well.)</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if any stale entries have been removed.</dd></dl>
</li>
</ul>
<a name="rehash()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rehash</h4>
<pre>private&nbsp;void&nbsp;<a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.632">rehash</a>()</pre>
<div class="block">Re-pack and/or re-size the table. First scan the entire
 table removing stale entries. If this doesn't sufficiently
 shrink the size of the table, double the table size.</div>
</li>
</ul>
<a name="resize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resize</h4>
<pre>private&nbsp;void&nbsp;<a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.643">resize</a>()</pre>
<div class="block">Double the capacity of the table.</div>
</li>
</ul>
<a name="expungeStaleEntries()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>expungeStaleEntries</h4>
<pre>private&nbsp;void&nbsp;<a href="../../src-html/java/lang/ThreadLocal.ThreadLocalMap.html#line.674">expungeStaleEntries</a>()</pre>
<div class="block">Expunge all stale entries in the table.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ThreadLocal.ThreadLocalMap.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../java/lang/ThreadLocal.html" title="class in java.lang"><span class="strong">Prev Class</span></a></li>
<li><a href="../../java/lang/ThreadLocal.ThreadLocalMap.Entry.html" title="class in java.lang"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?java/lang/ThreadLocal.ThreadLocalMap.html" target="_top">Frames</a></li>
<li><a href="ThreadLocal.ThreadLocalMap.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
