<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Sun Jun 14 21:11:12 EDT 2015 -->
<title>Phaser</title>
<meta name="date" content="2015-06-14">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Phaser";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Phaser.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../java/util/concurrent/LinkedTransferQueue.Node.html" title="class in java.util.concurrent"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../java/util/concurrent/Phaser.QNode.html" title="class in java.util.concurrent"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?java/util/concurrent/Phaser.html" target="_top">Frames</a></li>
<li><a href="Phaser.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">java.util.concurrent</div>
<h2 title="Class Phaser" class="title">Class Phaser</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="../../../java/lang/Object.html" title="class in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>java.util.concurrent.Phaser</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <a href="../../../src-html/java/util/concurrent/Phaser.html#line.261">Phaser</a>
extends <a href="../../../java/lang/Object.html" title="class in java.lang">Object</a></pre>
<div class="block">A reusable synchronization barrier, similar in functionality to
 <a href="../../../java/util/concurrent/CyclicBarrier.html" title="class in java.util.concurrent"><code>CyclicBarrier</code></a> and
 <a href="../../../java/util/concurrent/CountDownLatch.html" title="class in java.util.concurrent"><code>CountDownLatch</code></a>
 but supporting more flexible usage.

 <p> <b>Registration.</b> Unlike the case for other barriers, the
 number of parties <em>registered</em> to synchronize on a phaser
 may vary over time.  Tasks may be registered at any time (using
 methods <a href="../../../java/util/concurrent/Phaser.html#register()"><code>register()</code></a>, <a href="../../../java/util/concurrent/Phaser.html#bulkRegister(int)"><code>bulkRegister(int)</code></a>, or forms of
 constructors establishing initial numbers of parties), and
 optionally deregistered upon any arrival (using <a href="../../../java/util/concurrent/Phaser.html#arriveAndDeregister()"><code>arriveAndDeregister()</code></a>).  As is the case with most basic
 synchronization constructs, registration and deregistration affect
 only internal counts; they do not establish any further internal
 bookkeeping, so tasks cannot query whether they are registered.
 (However, you can introduce such bookkeeping by subclassing this
 class.)

 <p> <b>Synchronization.</b> Like a <code>CyclicBarrier</code>, a <code>Phaser</code> may be repeatedly awaited.  Method <a href="../../../java/util/concurrent/Phaser.html#arriveAndAwaitAdvance()"><code>arriveAndAwaitAdvance()</code></a> has effect analogous to <a href="../../../java/util/concurrent/CyclicBarrier.html#await()"><code>CyclicBarrier.await</code></a>. Each
 generation of a phaser has an associated phase number. The phase
 number starts at zero, and advances when all parties arrive at the
 phaser, wrapping around to zero after reaching <code>Integer.MAX_VALUE</code>. The use of phase numbers enables independent
 control of actions upon arrival at a phaser and upon awaiting
 others, via two kinds of methods that may be invoked by any
 registered party:

 <ul>

   <li> <b>Arrival.</b> Methods <a href="../../../java/util/concurrent/Phaser.html#arrive()"><code>arrive()</code></a> and
       <a href="../../../java/util/concurrent/Phaser.html#arriveAndDeregister()"><code>arriveAndDeregister()</code></a> record arrival.  These methods
       do not block, but return an associated <em>arrival phase
       number</em>; that is, the phase number of the phaser to which
       the arrival applied. When the final party for a given phase
       arrives, an optional action is performed and the phase
       advances.  These actions are performed by the party
       triggering a phase advance, and are arranged by overriding
       method <a href="../../../java/util/concurrent/Phaser.html#onAdvance(int,%20int)"><code>onAdvance(int, int)</code></a>, which also controls
       termination. Overriding this method is similar to, but more
       flexible than, providing a barrier action to a <code>CyclicBarrier</code>.

   <li> <b>Waiting.</b> Method <a href="../../../java/util/concurrent/Phaser.html#awaitAdvance(int)"><code>awaitAdvance(int)</code></a> requires an
       argument indicating an arrival phase number, and returns when
       the phaser advances to (or is already at) a different phase.
       Unlike similar constructions using <code>CyclicBarrier</code>,
       method <code>awaitAdvance</code> continues to wait even if the
       waiting thread is interrupted. Interruptible and timeout
       versions are also available, but exceptions encountered while
       tasks wait interruptibly or with timeout do not change the
       state of the phaser. If necessary, you can perform any
       associated recovery within handlers of those exceptions,
       often after invoking <code>forceTermination</code>.  Phasers may
       also be used by tasks executing in a <a href="../../../java/util/concurrent/ForkJoinPool.html" title="class in java.util.concurrent"><code>ForkJoinPool</code></a>,
       which will ensure sufficient parallelism to execute tasks
       when others are blocked waiting for a phase to advance.

 </ul>

 <p> <b>Termination.</b> A phaser may enter a <em>termination</em>
 state, that may be checked using method <a href="../../../java/util/concurrent/Phaser.html#isTerminated()"><code>isTerminated()</code></a>. Upon
 termination, all synchronization methods immediately return without
 waiting for advance, as indicated by a negative return value.
 Similarly, attempts to register upon termination have no effect.
 Termination is triggered when an invocation of <code>onAdvance</code>
 returns <code>true</code>. The default implementation returns <code>true</code> if a deregistration has caused the number of registered
 parties to become zero.  As illustrated below, when phasers control
 actions with a fixed number of iterations, it is often convenient
 to override this method to cause termination when the current phase
 number reaches a threshold. Method <a href="../../../java/util/concurrent/Phaser.html#forceTermination()"><code>forceTermination()</code></a> is
 also available to abruptly release waiting threads and allow them
 to terminate.

 <p> <b>Tiering.</b> Phasers may be <em>tiered</em> (i.e.,
 constructed in tree structures) to reduce contention. Phasers with
 large numbers of parties that would otherwise experience heavy
 synchronization contention costs may instead be set up so that
 groups of sub-phasers share a common parent.  This may greatly
 increase throughput even though it incurs greater per-operation
 overhead.

 <p>In a tree of tiered phasers, registration and deregistration of
 child phasers with their parent are managed automatically.
 Whenever the number of registered parties of a child phaser becomes
 non-zero (as established in the <a href="../../../java/util/concurrent/Phaser.html#Phaser(java.util.concurrent.Phaser,%20int)"><code>Phaser(Phaser,int)</code></a>
 constructor, <a href="../../../java/util/concurrent/Phaser.html#register()"><code>register()</code></a>, or <a href="../../../java/util/concurrent/Phaser.html#bulkRegister(int)"><code>bulkRegister(int)</code></a>), the
 child phaser is registered with its parent.  Whenever the number of
 registered parties becomes zero as the result of an invocation of
 <a href="../../../java/util/concurrent/Phaser.html#arriveAndDeregister()"><code>arriveAndDeregister()</code></a>, the child phaser is deregistered
 from its parent.

 <p><b>Monitoring.</b> While synchronization methods may be invoked
 only by registered parties, the current state of a phaser may be
 monitored by any caller.  At any given moment there are <a href="../../../java/util/concurrent/Phaser.html#getRegisteredParties()"><code>getRegisteredParties()</code></a> parties in total, of which <a href="../../../java/util/concurrent/Phaser.html#getArrivedParties()"><code>getArrivedParties()</code></a> have arrived at the current phase (<a href="../../../java/util/concurrent/Phaser.html#getPhase()"><code>getPhase()</code></a>).  When the remaining (<a href="../../../java/util/concurrent/Phaser.html#getUnarrivedParties()"><code>getUnarrivedParties()</code></a>)
 parties arrive, the phase advances.  The values returned by these
 methods may reflect transient states and so are not in general
 useful for synchronization control.  Method <a href="../../../java/util/concurrent/Phaser.html#toString()"><code>toString()</code></a>
 returns snapshots of these state queries in a form convenient for
 informal monitoring.

 <p><b>Sample usages:</b>

 <p>A <code>Phaser</code> may be used instead of a <code>CountDownLatch</code>
 to control a one-shot action serving a variable number of parties.
 The typical idiom is for the method setting this up to first
 register, then start the actions, then deregister, as in:

  <pre> <code>void runTasks(List&lt;Runnable&gt; tasks) {
   final Phaser phaser = new Phaser(1); // "1" to register self
   // create and start threads
   for (final Runnable task : tasks) {
     phaser.register();
     new Thread() {
       public void run() {
         phaser.arriveAndAwaitAdvance(); // await all creation
         task.run();
       }
     }.start();
   }

   // allow threads to start and deregister self
   phaser.arriveAndDeregister();
 }</code></pre>

 <p>One way to cause a set of threads to repeatedly perform actions
 for a given number of iterations is to override <code>onAdvance</code>:

  <pre> <code>void startTasks(List&lt;Runnable&gt; tasks, final int iterations) {
   final Phaser phaser = new Phaser() {
     protected boolean onAdvance(int phase, int registeredParties) {
       return phase &gt;= iterations || registeredParties == 0;
     }
   };
   phaser.register();
   for (final Runnable task : tasks) {
     phaser.register();
     new Thread() {
       public void run() {
         do {
           task.run();
           phaser.arriveAndAwaitAdvance();
         } while (!phaser.isTerminated());
       }
     }.start();
   }
   phaser.arriveAndDeregister(); // deregister self, don't wait
 }</code></pre>

 If the main task must later await termination, it
 may re-register and then execute a similar loop:
  <pre> <code>// ...
   phaser.register();
   while (!phaser.isTerminated())
     phaser.arriveAndAwaitAdvance();</code></pre>

 <p>Related constructions may be used to await particular phase numbers
 in contexts where you are sure that the phase will never wrap around
 <code>Integer.MAX_VALUE</code>. For example:

  <pre> <code>void awaitPhase(Phaser phaser, int phase) {
   int p = phaser.register(); // assumes caller not already registered
   while (p &lt; phase) {
     if (phaser.isTerminated())
       // ... deal with unexpected termination
     else
       p = phaser.arriveAndAwaitAdvance();
   }
   phaser.arriveAndDeregister();
 }</code></pre>


 <p>To create a set of <code>n</code> tasks using a tree of phasers, you
 could use code of the following form, assuming a Task class with a
 constructor accepting a <code>Phaser</code> that it registers with upon
 construction. After invocation of <code>build(new Task[n], 0, n,
 new Phaser())</code>, these tasks could then be started, for example by
 submitting to a pool:

  <pre> <code>void build(Task[] tasks, int lo, int hi, Phaser ph) {
   if (hi - lo &gt; TASKS_PER_PHASER) {
     for (int i = lo; i &lt; hi; i += TASKS_PER_PHASER) {
       int j = Math.min(i + TASKS_PER_PHASER, hi);
       build(tasks, i, j, new Phaser(ph));
     }
   } else {
     for (int i = lo; i &lt; hi; ++i)
       tasks[i] = new Task(ph);
       // assumes new Task(ph) performs ph.register()
   }
 }</code></pre>

 The best value of <code>TASKS_PER_PHASER</code> depends mainly on
 expected synchronization rates. A value as low as four may
 be appropriate for extremely small per-phase task bodies (thus
 high rates), or up to hundreds for extremely large ones.

 <p><b>Implementation notes</b>: This implementation restricts the
 maximum number of parties to 65535. Attempts to register additional
 parties result in <code>IllegalStateException</code>. However, you can and
 should create tiered phasers to accommodate arbitrarily large sets
 of participants.</div>
<dl><dt><span class="strong">Since:</span></dt>
  <dd>1.7</dd>
<dt><span class="strong">Author:</span></dt>
  <dd>Doug Lea</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.QNode.html" title="class in java.util.concurrent">Phaser.QNode</a></strong></code>
<div class="block">Wait nodes for Treiber stack representing wait queue</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#EMPTY">EMPTY</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../java/util/concurrent/atomic/AtomicReference.html" title="class in java.util.concurrent.atomic">AtomicReference</a>&lt;<a href="../../../java/util/concurrent/Phaser.QNode.html" title="class in java.util.concurrent">Phaser.QNode</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#evenQ">evenQ</a></strong></code>
<div class="block">Heads of Treiber stacks for waiting threads.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#MAX_PARTIES">MAX_PARTIES</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#MAX_PHASE">MAX_PHASE</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#NCPU">NCPU</a></strong></code>
<div class="block">The number of CPUs, for spin control</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../java/util/concurrent/atomic/AtomicReference.html" title="class in java.util.concurrent.atomic">AtomicReference</a>&lt;<a href="../../../java/util/concurrent/Phaser.QNode.html" title="class in java.util.concurrent">Phaser.QNode</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#oddQ">oddQ</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#ONE_ARRIVAL">ONE_ARRIVAL</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#ONE_PARTY">ONE_PARTY</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../java/util/concurrent/Phaser.html" title="class in java.util.concurrent">Phaser</a></code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#parent">parent</a></strong></code>
<div class="block">The parent of this phaser, or null if none</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static long</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#PARTIES_MASK">PARTIES_MASK</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#PARTIES_SHIFT">PARTIES_SHIFT</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#PHASE_SHIFT">PHASE_SHIFT</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../java/util/concurrent/Phaser.html" title="class in java.util.concurrent">Phaser</a></code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#root">root</a></strong></code>
<div class="block">The root of phaser tree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#SPINS_PER_ARRIVAL">SPINS_PER_ARRIVAL</a></strong></code>
<div class="block">The number of times to spin before blocking while waiting for
 advance, per arrival while waiting.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#state">state</a></strong></code>
<div class="block">Primary state representation, holding four bit-fields:

 unarrived  -- the number of parties yet to hit barrier (bits  0-15)
 parties    -- the number of parties to wait            (bits 16-31)
 phase      -- the generation of the barrier            (bits 32-62)
 terminated -- set if barrier is terminated             (bit  63 / sign)

 Except that a phaser with no registered parties is
 distinguished by the otherwise illegal state of having zero
 parties and one unarrived parties (encoded as EMPTY below).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static long</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#stateOffset">stateOffset</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static long</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#TERMINATION_BIT">TERMINATION_BIT</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#UNARRIVED_MASK">UNARRIVED_MASK</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static sun.misc.Unsafe</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#UNSAFE">UNSAFE</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../java/util/concurrent/Phaser.html#Phaser()">Phaser</a></strong>()</code>
<div class="block">Creates a new phaser with no initially registered parties, no
 parent, and initial phase number 0.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../java/util/concurrent/Phaser.html#Phaser(int)">Phaser</a></strong>(int&nbsp;parties)</code>
<div class="block">Creates a new phaser with the given number of registered
 unarrived parties, no parent, and initial phase number 0.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../java/util/concurrent/Phaser.html#Phaser(java.util.concurrent.Phaser)">Phaser</a></strong>(<a href="../../../java/util/concurrent/Phaser.html" title="class in java.util.concurrent">Phaser</a>&nbsp;parent)</code>
<div class="block">Equivalent to <a href="../../../java/util/concurrent/Phaser.html#Phaser(java.util.concurrent.Phaser,%20int)"><code>Phaser(parent, 0)</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../java/util/concurrent/Phaser.html#Phaser(java.util.concurrent.Phaser,%20int)">Phaser</a></strong>(<a href="../../../java/util/concurrent/Phaser.html" title="class in java.util.concurrent">Phaser</a>&nbsp;parent,
            int&nbsp;parties)</code>
<div class="block">Creates a new phaser with the given parent and number of
 registered unarrived parties.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#abortWait(int)">abortWait</a></strong>(int&nbsp;phase)</code>
<div class="block">Variant of releaseWaiters that additionally tries to remove any
 nodes no longer waiting for advance due to timeout or
 interrupt.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#arrive()">arrive</a></strong>()</code>
<div class="block">Arrives at this phaser, without waiting for others to arrive.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#arriveAndAwaitAdvance()">arriveAndAwaitAdvance</a></strong>()</code>
<div class="block">Arrives at this phaser and awaits others.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#arriveAndDeregister()">arriveAndDeregister</a></strong>()</code>
<div class="block">Arrives at this phaser and deregisters from it without waiting
 for others to arrive.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#arrivedOf(long)">arrivedOf</a></strong>(long&nbsp;s)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#awaitAdvance(int)">awaitAdvance</a></strong>(int&nbsp;phase)</code>
<div class="block">Awaits the phase of this phaser to advance from the given phase
 value, returning immediately if the current phase is not equal
 to the given phase value or this phaser is terminated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#awaitAdvanceInterruptibly(int)">awaitAdvanceInterruptibly</a></strong>(int&nbsp;phase)</code>
<div class="block">Awaits the phase of this phaser to advance from the given phase
 value, throwing <code>InterruptedException</code> if interrupted
 while waiting, or returning immediately if the current phase is
 not equal to the given phase value or this phaser is
 terminated.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#awaitAdvanceInterruptibly(int,%20long,%20java.util.concurrent.TimeUnit)">awaitAdvanceInterruptibly</a></strong>(int&nbsp;phase,
                                                  long&nbsp;timeout,
                                                  <a href="../../../java/util/concurrent/TimeUnit.html" title="enum in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Awaits the phase of this phaser to advance from the given phase
 value or the given timeout to elapse, throwing <code>InterruptedException</code> if interrupted while waiting, or
 returning immediately if the current phase is not equal to the
 given phase value or this phaser is terminated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../java/lang/String.html" title="class in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#badArrive(long)">badArrive</a></strong>(long&nbsp;s)</code>
<div class="block">Returns message string for bounds exceptions on arrival.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../java/lang/String.html" title="class in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#badRegister(long)">badRegister</a></strong>(long&nbsp;s)</code>
<div class="block">Returns message string for bounds exceptions on registration.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#bulkRegister(int)">bulkRegister</a></strong>(int&nbsp;parties)</code>
<div class="block">Adds the given number of new unarrived parties to this phaser.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#doArrive(boolean)">doArrive</a></strong>(boolean&nbsp;deregister)</code>
<div class="block">Main implementation for methods arrive and arriveAndDeregister.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#doRegister(int)">doRegister</a></strong>(int&nbsp;registrations)</code>
<div class="block">Implementation of register, bulkRegister</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#forceTermination()">forceTermination</a></strong>()</code>
<div class="block">Forces this phaser to enter termination state.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#getArrivedParties()">getArrivedParties</a></strong>()</code>
<div class="block">Returns the number of registered parties that have arrived at
 the current phase of this phaser.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../java/util/concurrent/Phaser.html" title="class in java.util.concurrent">Phaser</a></code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#getParent()">getParent</a></strong>()</code>
<div class="block">Returns the parent of this phaser, or <code>null</code> if none.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#getPhase()">getPhase</a></strong>()</code>
<div class="block">Returns the current phase number.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#getRegisteredParties()">getRegisteredParties</a></strong>()</code>
<div class="block">Returns the number of parties registered at this phaser.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../java/util/concurrent/Phaser.html" title="class in java.util.concurrent">Phaser</a></code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#getRoot()">getRoot</a></strong>()</code>
<div class="block">Returns the root ancestor of this phaser, which is the same as
 this phaser if it has no parent.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#getUnarrivedParties()">getUnarrivedParties</a></strong>()</code>
<div class="block">Returns the number of registered parties that have not yet
 arrived at the current phase of this phaser.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#internalAwaitAdvance(int,%20java.util.concurrent.Phaser.QNode)">internalAwaitAdvance</a></strong>(int&nbsp;phase,
                                        <a href="../../../java/util/concurrent/Phaser.QNode.html" title="class in java.util.concurrent">Phaser.QNode</a>&nbsp;node)</code>
<div class="block">Possibly blocks and waits for phase to advance unless aborted.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#isTerminated()">isTerminated</a></strong>()</code>
<div class="block">Returns <code>true</code> if this phaser has been terminated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#onAdvance(int,%20int)">onAdvance</a></strong>(int&nbsp;phase,
                  int&nbsp;registeredParties)</code>
<div class="block">Overridable method to perform an action upon impending phase
 advance, and to control termination.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#partiesOf(long)">partiesOf</a></strong>(long&nbsp;s)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#phaseOf(long)">phaseOf</a></strong>(long&nbsp;s)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../java/util/concurrent/atomic/AtomicReference.html" title="class in java.util.concurrent.atomic">AtomicReference</a>&lt;<a href="../../../java/util/concurrent/Phaser.QNode.html" title="class in java.util.concurrent">Phaser.QNode</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#queueFor(int)">queueFor</a></strong>(int&nbsp;phase)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#reconcileState()">reconcileState</a></strong>()</code>
<div class="block">Resolves lagged phase propagation from root if necessary.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#register()">register</a></strong>()</code>
<div class="block">Adds a new unarrived party to this phaser.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#releaseWaiters(int)">releaseWaiters</a></strong>(int&nbsp;phase)</code>
<div class="block">Removes and signals threads from queue for phase.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../java/lang/String.html" title="class in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#stateToString(long)">stateToString</a></strong>(long&nbsp;s)</code>
<div class="block">Implementation of toString and string-based error messages</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../java/lang/String.html" title="class in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#toString()">toString</a></strong>()</code>
<div class="block">Returns a string identifying this phaser, as well as its
 state.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../java/util/concurrent/Phaser.html#unarrivedOf(long)">unarrivedOf</a></strong>(long&nbsp;s)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="../../../java/lang/Object.html" title="class in java.lang">Object</a></h3>
<code><a href="../../../java/lang/Object.html#clone()">clone</a>, <a href="../../../java/lang/Object.html#equals(java.lang.Object)">equals</a>, <a href="../../../java/lang/Object.html#finalize()">finalize</a>, <a href="../../../java/lang/Object.html#getClass()">getClass</a>, <a href="../../../java/lang/Object.html#hashCode()">hashCode</a>, <a href="../../../java/lang/Object.html#notify()">notify</a>, <a href="../../../java/lang/Object.html#notifyAll()">notifyAll</a>, <a href="../../../java/lang/Object.html#wait()">wait</a>, <a href="../../../java/lang/Object.html#wait(long)">wait</a>, <a href="../../../java/lang/Object.html#wait(long,%20int)">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="state">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>state</h4>
<pre>private volatile&nbsp;long <a href="../../../src-html/java/util/concurrent/Phaser.html#line.295">state</a></pre>
<div class="block">Primary state representation, holding four bit-fields:

 unarrived  -- the number of parties yet to hit barrier (bits  0-15)
 parties    -- the number of parties to wait            (bits 16-31)
 phase      -- the generation of the barrier            (bits 32-62)
 terminated -- set if barrier is terminated             (bit  63 / sign)

 Except that a phaser with no registered parties is
 distinguished by the otherwise illegal state of having zero
 parties and one unarrived parties (encoded as EMPTY below).

 To efficiently maintain atomicity, these values are packed into
 a single (atomic) long. Good performance relies on keeping
 state decoding and encoding simple, and keeping race windows
 short.

 All state updates are performed via CAS except initial
 registration of a sub-phaser (i.e., one with a non-null
 parent).  In this (relatively rare) case, we use built-in
 synchronization to lock while first registering with its
 parent.

 The phase of a subphaser is allowed to lag that of its
 ancestors until it is actually accessed -- see method
 reconcileState.</div>
</li>
</ul>
<a name="MAX_PARTIES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_PARTIES</h4>
<pre>private static final&nbsp;int <a href="../../../src-html/java/util/concurrent/Phaser.html#line.297">MAX_PARTIES</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#java.util.concurrent.Phaser.MAX_PARTIES">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="MAX_PHASE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_PHASE</h4>
<pre>private static final&nbsp;int <a href="../../../src-html/java/util/concurrent/Phaser.html#line.298">MAX_PHASE</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#java.util.concurrent.Phaser.MAX_PHASE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="PARTIES_SHIFT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PARTIES_SHIFT</h4>
<pre>private static final&nbsp;int <a href="../../../src-html/java/util/concurrent/Phaser.html#line.299">PARTIES_SHIFT</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#java.util.concurrent.Phaser.PARTIES_SHIFT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="PHASE_SHIFT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PHASE_SHIFT</h4>
<pre>private static final&nbsp;int <a href="../../../src-html/java/util/concurrent/Phaser.html#line.300">PHASE_SHIFT</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#java.util.concurrent.Phaser.PHASE_SHIFT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="UNARRIVED_MASK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>UNARRIVED_MASK</h4>
<pre>private static final&nbsp;int <a href="../../../src-html/java/util/concurrent/Phaser.html#line.301">UNARRIVED_MASK</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#java.util.concurrent.Phaser.UNARRIVED_MASK">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="PARTIES_MASK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PARTIES_MASK</h4>
<pre>private static final&nbsp;long <a href="../../../src-html/java/util/concurrent/Phaser.html#line.302">PARTIES_MASK</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#java.util.concurrent.Phaser.PARTIES_MASK">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="TERMINATION_BIT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TERMINATION_BIT</h4>
<pre>private static final&nbsp;long <a href="../../../src-html/java/util/concurrent/Phaser.html#line.303">TERMINATION_BIT</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#java.util.concurrent.Phaser.TERMINATION_BIT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ONE_ARRIVAL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ONE_ARRIVAL</h4>
<pre>private static final&nbsp;int <a href="../../../src-html/java/util/concurrent/Phaser.html#line.306">ONE_ARRIVAL</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#java.util.concurrent.Phaser.ONE_ARRIVAL">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ONE_PARTY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ONE_PARTY</h4>
<pre>private static final&nbsp;int <a href="../../../src-html/java/util/concurrent/Phaser.html#line.307">ONE_PARTY</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#java.util.concurrent.Phaser.ONE_PARTY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="EMPTY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>EMPTY</h4>
<pre>private static final&nbsp;int <a href="../../../src-html/java/util/concurrent/Phaser.html#line.308">EMPTY</a></pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#java.util.concurrent.Phaser.EMPTY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="parent">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parent</h4>
<pre>private final&nbsp;<a href="../../../java/util/concurrent/Phaser.html" title="class in java.util.concurrent">Phaser</a> <a href="../../../src-html/java/util/concurrent/Phaser.html#line.334">parent</a></pre>
<div class="block">The parent of this phaser, or null if none</div>
</li>
</ul>
<a name="root">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>root</h4>
<pre>private final&nbsp;<a href="../../../java/util/concurrent/Phaser.html" title="class in java.util.concurrent">Phaser</a> <a href="../../../src-html/java/util/concurrent/Phaser.html#line.339">root</a></pre>
<div class="block">The root of phaser tree. Equals this if not in a tree.</div>
</li>
</ul>
<a name="evenQ">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>evenQ</h4>
<pre>private final&nbsp;<a href="../../../java/util/concurrent/atomic/AtomicReference.html" title="class in java.util.concurrent.atomic">AtomicReference</a>&lt;<a href="../../../java/util/concurrent/Phaser.QNode.html" title="class in java.util.concurrent">Phaser.QNode</a>&gt; <a href="../../../src-html/java/util/concurrent/Phaser.html#line.347">evenQ</a></pre>
<div class="block">Heads of Treiber stacks for waiting threads. To eliminate
 contention when releasing some threads while adding others, we
 use two of them, alternating across even and odd phases.
 Subphasers share queues with root to speed up releases.</div>
</li>
</ul>
<a name="oddQ">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>oddQ</h4>
<pre>private final&nbsp;<a href="../../../java/util/concurrent/atomic/AtomicReference.html" title="class in java.util.concurrent.atomic">AtomicReference</a>&lt;<a href="../../../java/util/concurrent/Phaser.QNode.html" title="class in java.util.concurrent">Phaser.QNode</a>&gt; <a href="../../../src-html/java/util/concurrent/Phaser.html#line.348">oddQ</a></pre>
</li>
</ul>
<a name="NCPU">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NCPU</h4>
<pre>private static final&nbsp;int <a href="../../../src-html/java/util/concurrent/Phaser.html#line.1002">NCPU</a></pre>
<div class="block">The number of CPUs, for spin control</div>
</li>
</ul>
<a name="SPINS_PER_ARRIVAL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SPINS_PER_ARRIVAL</h4>
<pre>static final&nbsp;int <a href="../../../src-html/java/util/concurrent/Phaser.html#line.1015">SPINS_PER_ARRIVAL</a></pre>
<div class="block">The number of times to spin before blocking while waiting for
 advance, per arrival while waiting. On multiprocessors, fully
 blocking and waking up a large number of threads all at once is
 usually a very slow process, so we use rechargeable spins to
 avoid it when threads regularly arrive: When a thread in
 internalAwaitAdvance notices another arrival before blocking,
 and there appear to be enough CPUs available, it spins
 SPINS_PER_ARRIVAL more times before blocking. The value trades
 off good-citizenship vs big unnecessary slowdowns.</div>
</li>
</ul>
<a name="UNSAFE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>UNSAFE</h4>
<pre>private static final&nbsp;sun.misc.Unsafe <a href="../../../src-html/java/util/concurrent/Phaser.html#line.1140">UNSAFE</a></pre>
</li>
</ul>
<a name="stateOffset">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>stateOffset</h4>
<pre>private static final&nbsp;long <a href="../../../src-html/java/util/concurrent/Phaser.html#line.1141">stateOffset</a></pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Phaser()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Phaser</h4>
<pre>public&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.501">Phaser</a>()</pre>
<div class="block">Creates a new phaser with no initially registered parties, no
 parent, and initial phase number 0. Any thread using this
 phaser will need to first register for it.</div>
</li>
</ul>
<a name="Phaser(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Phaser</h4>
<pre>public&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.514">Phaser</a>(int&nbsp;parties)</pre>
<div class="block">Creates a new phaser with the given number of registered
 unarrived parties, no parent, and initial phase number 0.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>parties</code> - the number of parties required to advance to the
 next phase</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../java/lang/IllegalArgumentException.html" title="class in java.lang">IllegalArgumentException</a></code> - if parties less than zero
 or greater than the maximum number of parties supported</dd></dl>
</li>
</ul>
<a name="Phaser(java.util.concurrent.Phaser)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Phaser</h4>
<pre>public&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.523">Phaser</a>(<a href="../../../java/util/concurrent/Phaser.html" title="class in java.util.concurrent">Phaser</a>&nbsp;parent)</pre>
<div class="block">Equivalent to <a href="../../../java/util/concurrent/Phaser.html#Phaser(java.util.concurrent.Phaser,%20int)"><code>Phaser(parent, 0)</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>parent</code> - the parent phaser</dd></dl>
</li>
</ul>
<a name="Phaser(java.util.concurrent.Phaser, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Phaser</h4>
<pre>public&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.539">Phaser</a>(<a href="../../../java/util/concurrent/Phaser.html" title="class in java.util.concurrent">Phaser</a>&nbsp;parent,
      int&nbsp;parties)</pre>
<div class="block">Creates a new phaser with the given parent and number of
 registered unarrived parties.  When the given parent is non-null
 and the given number of parties is greater than zero, this
 child phaser is registered with its parent.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>parent</code> - the parent phaser</dd><dd><code>parties</code> - the number of parties required to advance to the
 next phase</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../java/lang/IllegalArgumentException.html" title="class in java.lang">IllegalArgumentException</a></code> - if parties less than zero
 or greater than the maximum number of parties supported</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="unarrivedOf(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unarrivedOf</h4>
<pre>private static&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.312">unarrivedOf</a>(long&nbsp;s)</pre>
</li>
</ul>
<a name="partiesOf(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>partiesOf</h4>
<pre>private static&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.317">partiesOf</a>(long&nbsp;s)</pre>
</li>
</ul>
<a name="phaseOf(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>phaseOf</h4>
<pre>private static&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.321">phaseOf</a>(long&nbsp;s)</pre>
</li>
</ul>
<a name="arrivedOf(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>arrivedOf</h4>
<pre>private static&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.325">arrivedOf</a>(long&nbsp;s)</pre>
</li>
</ul>
<a name="queueFor(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queueFor</h4>
<pre>private&nbsp;<a href="../../../java/util/concurrent/atomic/AtomicReference.html" title="class in java.util.concurrent.atomic">AtomicReference</a>&lt;<a href="../../../java/util/concurrent/Phaser.QNode.html" title="class in java.util.concurrent">Phaser.QNode</a>&gt;&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.350">queueFor</a>(int&nbsp;phase)</pre>
</li>
</ul>
<a name="badArrive(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>badArrive</h4>
<pre>private&nbsp;<a href="../../../java/lang/String.html" title="class in java.lang">String</a>&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.357">badArrive</a>(long&nbsp;s)</pre>
<div class="block">Returns message string for bounds exceptions on arrival.</div>
</li>
</ul>
<a name="badRegister(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>badRegister</h4>
<pre>private&nbsp;<a href="../../../java/lang/String.html" title="class in java.lang">String</a>&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.365">badRegister</a>(long&nbsp;s)</pre>
<div class="block">Returns message string for bounds exceptions on registration.</div>
</li>
</ul>
<a name="doArrive(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doArrive</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.377">doArrive</a>(boolean&nbsp;deregister)</pre>
<div class="block">Main implementation for methods arrive and arriveAndDeregister.
 Manually tuned to speed up and minimize race windows for the
 common case of just decrementing unarrived field.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>deregister</code> - false for arrive, true for arriveAndDeregister</dd></dl>
</li>
</ul>
<a name="doRegister(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doRegister</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.418">doRegister</a>(int&nbsp;registrations)</pre>
<div class="block">Implementation of register, bulkRegister</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>registrations</code> - number to add to both parties and
 unarrived fields. Must be greater than zero.</dd></dl>
</li>
</ul>
<a name="reconcileState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reconcileState</h4>
<pre>private&nbsp;long&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.477">reconcileState</a>()</pre>
<div class="block">Resolves lagged phase propagation from root if necessary.
 Reconciliation normally occurs when root has advanced but
 subphasers have not yet done so, in which case they must finish
 their own advance by setting unarrived to parties (or if
 parties is zero, resetting to unregistered EMPTY state).
 However, this method may also be called when "floating"
 subphasers with possibly some unarrived parties are merely
 catching up to current phase, in which case counts are
 unaffected.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>reconciled state</dd></dl>
</li>
</ul>
<a name="register()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>register</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.578">register</a>()</pre>
<div class="block">Adds a new unarrived party to this phaser.  If an ongoing
 invocation of <a href="../../../java/util/concurrent/Phaser.html#onAdvance(int,%20int)"><code>onAdvance(int, int)</code></a> is in progress, this method
 may await its completion before returning.  If this phaser has
 a parent, and this phaser previously had no registered parties,
 this child phaser is also registered with its parent. If
 this phaser is terminated, the attempt to register has
 no effect, and a negative value is returned.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the arrival phase number to which this registration
 applied.  If this value is negative, then this phaser has
 terminated, in which case registration has no effect.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../java/lang/IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if attempting to register more
 than the maximum supported number of parties</dd></dl>
</li>
</ul>
<a name="bulkRegister(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bulkRegister</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.601">bulkRegister</a>(int&nbsp;parties)</pre>
<div class="block">Adds the given number of new unarrived parties to this phaser.
 If an ongoing invocation of <a href="../../../java/util/concurrent/Phaser.html#onAdvance(int,%20int)"><code>onAdvance(int, int)</code></a> is in progress,
 this method may await its completion before returning.  If this
 phaser has a parent, and the given number of parties is greater
 than zero, and this phaser previously had no registered
 parties, this child phaser is also registered with its parent.
 If this phaser is terminated, the attempt to register has no
 effect, and a negative value is returned.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>parties</code> - the number of additional parties required to
 advance to the next phase</dd>
<dt><span class="strong">Returns:</span></dt><dd>the arrival phase number to which this registration
 applied.  If this value is negative, then this phaser has
 terminated, in which case registration has no effect.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../java/lang/IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if attempting to register more
 than the maximum supported number of parties</dd>
<dd><code><a href="../../../java/lang/IllegalArgumentException.html" title="class in java.lang">IllegalArgumentException</a></code> - if <code>parties &lt; 0</code></dd></dl>
</li>
</ul>
<a name="arrive()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>arrive</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.621">arrive</a>()</pre>
<div class="block">Arrives at this phaser, without waiting for others to arrive.

 <p>It is a usage error for an unregistered party to invoke this
 method.  However, this error may result in an <code>IllegalStateException</code> only upon some subsequent operation on
 this phaser, if ever.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the arrival phase number, or a negative value if terminated</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../java/lang/IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if not terminated and the number
 of unarrived parties would become negative</dd></dl>
</li>
</ul>
<a name="arriveAndDeregister()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>arriveAndDeregister</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.641">arriveAndDeregister</a>()</pre>
<div class="block">Arrives at this phaser and deregisters from it without waiting
 for others to arrive. Deregistration reduces the number of
 parties required to advance in future phases.  If this phaser
 has a parent, and deregistration causes this phaser to have
 zero parties, this phaser is also deregistered from its parent.

 <p>It is a usage error for an unregistered party to invoke this
 method.  However, this error may result in an <code>IllegalStateException</code> only upon some subsequent operation on
 this phaser, if ever.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the arrival phase number, or a negative value if terminated</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../java/lang/IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if not terminated and the number
 of registered or unarrived parties would become negative</dd></dl>
</li>
</ul>
<a name="arriveAndAwaitAdvance()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>arriveAndAwaitAdvance</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.663">arriveAndAwaitAdvance</a>()</pre>
<div class="block">Arrives at this phaser and awaits others. Equivalent in effect
 to <code>awaitAdvance(arrive())</code>.  If you need to await with
 interruption or timeout, you can arrange this with an analogous
 construction using one of the other forms of the <code>awaitAdvance</code> method.  If instead you need to deregister upon
 arrival, use <code>awaitAdvance(arriveAndDeregister())</code>.

 <p>It is a usage error for an unregistered party to invoke this
 method.  However, this error may result in an <code>IllegalStateException</code> only upon some subsequent operation on
 this phaser, if ever.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the arrival phase number, or the (negative)
 <a href="../../../java/util/concurrent/Phaser.html#getPhase()">current phase</a> if terminated</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../java/lang/IllegalStateException.html" title="class in java.lang">IllegalStateException</a></code> - if not terminated and the number
 of unarrived parties would become negative</dd></dl>
</li>
</ul>
<a name="awaitAdvance(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>awaitAdvance</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.713">awaitAdvance</a>(int&nbsp;phase)</pre>
<div class="block">Awaits the phase of this phaser to advance from the given phase
 value, returning immediately if the current phase is not equal
 to the given phase value or this phaser is terminated.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>phase</code> - an arrival phase number, or negative value if
 terminated; this argument is normally the value returned by a
 previous call to <code>arrive</code> or <code>arriveAndDeregister</code>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the next arrival phase number, or the argument if it is
 negative, or the (negative) <a href="../../../java/util/concurrent/Phaser.html#getPhase()">current phase</a>
 if terminated</dd></dl>
</li>
</ul>
<a name="awaitAdvanceInterruptibly(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>awaitAdvanceInterruptibly</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.739">awaitAdvanceInterruptibly</a>(int&nbsp;phase)
                              throws <a href="../../../java/lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></pre>
<div class="block">Awaits the phase of this phaser to advance from the given phase
 value, throwing <code>InterruptedException</code> if interrupted
 while waiting, or returning immediately if the current phase is
 not equal to the given phase value or this phaser is
 terminated.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>phase</code> - an arrival phase number, or negative value if
 terminated; this argument is normally the value returned by a
 previous call to <code>arrive</code> or <code>arriveAndDeregister</code>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the next arrival phase number, or the argument if it is
 negative, or the (negative) <a href="../../../java/util/concurrent/Phaser.html#getPhase()">current phase</a>
 if terminated</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../java/lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></code> - if thread interrupted while waiting</dd></dl>
</li>
</ul>
<a name="awaitAdvanceInterruptibly(int, long, java.util.concurrent.TimeUnit)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>awaitAdvanceInterruptibly</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.775">awaitAdvanceInterruptibly</a>(int&nbsp;phase,
                            long&nbsp;timeout,
                            <a href="../../../java/util/concurrent/TimeUnit.html" title="enum in java.util.concurrent">TimeUnit</a>&nbsp;unit)
                              throws <a href="../../../java/lang/InterruptedException.html" title="class in java.lang">InterruptedException</a>,
                                     <a href="../../../java/util/concurrent/TimeoutException.html" title="class in java.util.concurrent">TimeoutException</a></pre>
<div class="block">Awaits the phase of this phaser to advance from the given phase
 value or the given timeout to elapse, throwing <code>InterruptedException</code> if interrupted while waiting, or
 returning immediately if the current phase is not equal to the
 given phase value or this phaser is terminated.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>phase</code> - an arrival phase number, or negative value if
 terminated; this argument is normally the value returned by a
 previous call to <code>arrive</code> or <code>arriveAndDeregister</code>.</dd><dd><code>timeout</code> - how long to wait before giving up, in units of
        <code>unit</code></dd><dd><code>unit</code> - a <code>TimeUnit</code> determining how to interpret the
        <code>timeout</code> parameter</dd>
<dt><span class="strong">Returns:</span></dt><dd>the next arrival phase number, or the argument if it is
 negative, or the (negative) <a href="../../../java/util/concurrent/Phaser.html#getPhase()">current phase</a>
 if terminated</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../java/lang/InterruptedException.html" title="class in java.lang">InterruptedException</a></code> - if thread interrupted while waiting</dd>
<dd><code><a href="../../../java/util/concurrent/TimeoutException.html" title="class in java.util.concurrent">TimeoutException</a></code> - if timed out while waiting</dd></dl>
</li>
</ul>
<a name="forceTermination()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceTermination</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.804">forceTermination</a>()</pre>
<div class="block">Forces this phaser to enter termination state.  Counts of
 registered parties are unaffected.  If this phaser is a member
 of a tiered set of phasers, then all of the phasers in the set
 are terminated.  If this phaser is already terminated, this
 method has no effect.  This method may be useful for
 coordinating recovery after one or more tasks encounter
 unexpected exceptions.</div>
</li>
</ul>
<a name="getPhase()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPhase</h4>
<pre>public final&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.828">getPhase</a>()</pre>
<div class="block">Returns the current phase number. The maximum phase number is
 <code>Integer.MAX_VALUE</code>, after which it restarts at
 zero. Upon termination, the phase number is negative,
 in which case the prevailing phase prior to termination
 may be obtained via <code>getPhase() + Integer.MIN_VALUE</code>.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the phase number, or a negative value if terminated</dd></dl>
</li>
</ul>
<a name="getRegisteredParties()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRegisteredParties</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.837">getRegisteredParties</a>()</pre>
<div class="block">Returns the number of parties registered at this phaser.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the number of parties</dd></dl>
</li>
</ul>
<a name="getArrivedParties()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getArrivedParties</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.848">getArrivedParties</a>()</pre>
<div class="block">Returns the number of registered parties that have arrived at
 the current phase of this phaser. If this phaser has terminated,
 the returned value is meaningless and arbitrary.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the number of arrived parties</dd></dl>
</li>
</ul>
<a name="getUnarrivedParties()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUnarrivedParties</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.859">getUnarrivedParties</a>()</pre>
<div class="block">Returns the number of registered parties that have not yet
 arrived at the current phase of this phaser. If this phaser has
 terminated, the returned value is meaningless and arbitrary.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the number of unarrived parties</dd></dl>
</li>
</ul>
<a name="getParent()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getParent</h4>
<pre>public&nbsp;<a href="../../../java/util/concurrent/Phaser.html" title="class in java.util.concurrent">Phaser</a>&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.868">getParent</a>()</pre>
<div class="block">Returns the parent of this phaser, or <code>null</code> if none.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the parent of this phaser, or <code>null</code> if none</dd></dl>
</li>
</ul>
<a name="getRoot()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRoot</h4>
<pre>public&nbsp;<a href="../../../java/util/concurrent/Phaser.html" title="class in java.util.concurrent">Phaser</a>&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.878">getRoot</a>()</pre>
<div class="block">Returns the root ancestor of this phaser, which is the same as
 this phaser if it has no parent.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the root ancestor of this phaser</dd></dl>
</li>
</ul>
<a name="isTerminated()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTerminated</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.887">isTerminated</a>()</pre>
<div class="block">Returns <code>true</code> if this phaser has been terminated.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd><code>true</code> if this phaser has been terminated</dd></dl>
</li>
</ul>
<a name="onAdvance(int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onAdvance</h4>
<pre>protected&nbsp;boolean&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.931">onAdvance</a>(int&nbsp;phase,
                int&nbsp;registeredParties)</pre>
<div class="block">Overridable method to perform an action upon impending phase
 advance, and to control termination. This method is invoked
 upon arrival of the party advancing this phaser (when all other
 waiting parties are dormant).  If this method returns <code>true</code>, this phaser will be set to a final termination state
 upon advance, and subsequent calls to <a href="../../../java/util/concurrent/Phaser.html#isTerminated()"><code>isTerminated()</code></a>
 will return true. Any (unchecked) Exception or Error thrown by
 an invocation of this method is propagated to the party
 attempting to advance this phaser, in which case no advance
 occurs.

 <p>The arguments to this method provide the state of the phaser
 prevailing for the current transition.  The effects of invoking
 arrival, registration, and waiting methods on this phaser from
 within <code>onAdvance</code> are unspecified and should not be
 relied on.

 <p>If this phaser is a member of a tiered set of phasers, then
 <code>onAdvance</code> is invoked only for its root phaser on each
 advance.

 <p>To support the most common use cases, the default
 implementation of this method returns <code>true</code> when the
 number of registered parties has become zero as the result of a
 party invoking <code>arriveAndDeregister</code>.  You can disable
 this behavior, thus enabling continuation upon future
 registrations, by overriding this method to always return
 <code>false</code>:

 <pre> <code>Phaser phaser = new Phaser() {
   protected boolean onAdvance(int phase, int parties) { return false; }
 }</code></pre></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>phase</code> - the current phase number on entry to this method,
 before this phaser is advanced</dd><dd><code>registeredParties</code> - the current number of registered parties</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if this phaser should terminate</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="../../../java/lang/String.html" title="class in java.lang">String</a>&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.944">toString</a>()</pre>
<div class="block">Returns a string identifying this phaser, as well as its
 state.  The state, in brackets, includes the String <code>"phase = "</code> followed by the phase number, <code>"parties = "</code>
 followed by the number of registered parties, and <code>"arrived = "</code> followed by the number of arrived parties.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../java/lang/Object.html#toString()">toString</a></code>&nbsp;in class&nbsp;<code><a href="../../../java/lang/Object.html" title="class in java.lang">Object</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a string identifying this phaser, as well as its state</dd></dl>
</li>
</ul>
<a name="stateToString(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stateToString</h4>
<pre>private&nbsp;<a href="../../../java/lang/String.html" title="class in java.lang">String</a>&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.951">stateToString</a>(long&nbsp;s)</pre>
<div class="block">Implementation of toString and string-based error messages</div>
</li>
</ul>
<a name="releaseWaiters(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseWaiters</h4>
<pre>private&nbsp;void&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.963">releaseWaiters</a>(int&nbsp;phase)</pre>
<div class="block">Removes and signals threads from queue for phase.</div>
</li>
</ul>
<a name="abortWait(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abortWait</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.986">abortWait</a>(int&nbsp;phase)</pre>
<div class="block">Variant of releaseWaiters that additionally tries to remove any
 nodes no longer waiting for advance due to timeout or
 interrupt. Currently, nodes are removed only if they are at
 head of queue, which suffices to reduce memory footprint in
 most usages.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>current phase on exit</dd></dl>
</li>
</ul>
<a name="internalAwaitAdvance(int, java.util.concurrent.Phaser.QNode)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>internalAwaitAdvance</h4>
<pre>private&nbsp;int&nbsp;<a href="../../../src-html/java/util/concurrent/Phaser.html#line.1026">internalAwaitAdvance</a>(int&nbsp;phase,
                       <a href="../../../java/util/concurrent/Phaser.QNode.html" title="class in java.util.concurrent">Phaser.QNode</a>&nbsp;node)</pre>
<div class="block">Possibly blocks and waits for phase to advance unless aborted.
 Call only from root node.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>phase</code> - current phase</dd><dd><code>node</code> - if non-null, the wait node to track interrupt and timeout;
 if null, denotes noninterruptible wait</dd>
<dt><span class="strong">Returns:</span></dt><dd>current phase</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Phaser.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../java/util/concurrent/LinkedTransferQueue.Node.html" title="class in java.util.concurrent"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../java/util/concurrent/Phaser.QNode.html" title="class in java.util.concurrent"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?java/util/concurrent/Phaser.html" target="_top">Frames</a></li>
<li><a href="Phaser.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
